<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Meet & Greet Quiz</title>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    margin: 0;
    background-color: #f9f9f9;
  }
  .container {
    max-width: 900px;
    margin: auto;
    padding: 20px;
  }
  h1 {
    font-size: 3em;
    color: #333;
  }
  .question {
    font-size: 2em;
    margin: 20px 0;
  }
  input[type="text"] {
    font-size: 1.5em;
    padding: 10px;
    width: 80%;
    margin: 10px auto;
    display: block;
    border-radius: 8px;
    border: 2px solid #ccc;
  }
  .answers {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
  }
  .answer {
    cursor: pointer;
    border: 3px solid transparent;
    border-radius: 10px;
    padding: 10px;
    background: white;
    max-width: 150px;
  }
  .answer:hover {
    border-color: #007bff;
  }
  .answer img {
    max-width: 100%;
    height: auto;
    display: block;
    margin: auto;
  }
  .answer p {
    font-size: 1.2em;
    margin-top: 5px;
  }
  button {
    font-size: 1.5em;
    padding: 15px 25px;
    margin-top: 20px;
    border: none;
    background: #007bff;
    color: white;
    border-radius: 8px;
    cursor: pointer;
  }
  .summary {
    font-size: 1.3em;
    margin-top: 20px;
  }
  .summary-name {
    font-size: 2.5em;
    color: green;
    font-weight: bold;
  }
  .summary-item {
    margin: 15px 0;
  }
  .summary-item img {
    max-width: 100px;
    margin-top: 5px;
  }
</style>
</head>
<body>

<div class="container">
  <h1 id="title">Welcome to the Quiz</h1>
  <div id="quiz"></div>
</div>

<script>
const questions = [
  { type: "input", question: "What is your name?", key: "name" },
  { type: "choice", question: "What is your favourite colour?", options: ["red","blue","green","yellow","purple","orange"], key: "colour" },
  { type: "choice", question: "What is your favourite animal?", options: ["dog","cat","bird","fish","horse","rabbit"], key: "animal" },
  { type: "choice", question: "What is your favourite food?", options: ["pizza","burger","pasta","salad","chocolate","ice cream"], key: "food" },
  { type: "choice", question: "What is your favourite hobby?", options: ["reading","drawing","football","dancing","singing","gaming"], key: "hobby" },
  { type: "choice", question: "What is your favourite season?", options: ["spring","summer","autumn","winter","rainy","snowy"], key: "season" }
];

let currentQuestion = 0;
let answers = {};

function fetchARASAAC(word) {
  const url = `https://api.arasaac.org/api/pictograms/en/search/${encodeURIComponent(word)}`;
  return fetch(url).then(res => res.json())
    .then(data => data.length ? `https://static.arasaac.org/pictograms/${data[0]._id}/${data[0]._id}_500.png` : null)
    .catch(() => null);
}

function showQuestion() {
  const q = questions[currentQuestion];
  const quizDiv = document.getElementById('quiz');
  quizDiv.innerHTML = '';

  const questionElem = document.createElement('div');
  questionElem.className = 'question';
  questionElem.textContent = q.question;
  quizDiv.appendChild(questionElem);

  if (q.type === "input") {
    const input = document.createElement('input');
    input.type = "text";
    input.id = "answerInput";
    input.placeholder = "Type your answer here";
    quizDiv.appendChild(input);

    const btn = document.createElement('button');
    btn.textContent = "Next";
    btn.onclick = () => {
      const val = document.getElementById('answerInput').value.trim();
      if (val) {
        answers[q.key] = val;
        currentQuestion++;
        showQuestion();
      }
    };
    quizDiv.appendChild(btn);

  } else if (q.type === "choice") {
    const answersDiv = document.createElement('div');
    answersDiv.className = 'answers';
    quizDiv.appendChild(answersDiv);

    q.options.forEach(option => {
      fetchARASAAC(option).then(imgUrl => {
        const ansDiv = document.createElement('div');
        ansDiv.className = 'answer';
        ansDiv.onclick = () => {
          answers[q.key] = option;
          currentQuestion++;
          showQuestion();
        };
        if (imgUrl) {
          const img = document.createElement('img');
          img.src = imgUrl;
          ansDiv.appendChild(img);
        }
        const label = document.createElement('p');
        label.textContent = option;
        ansDiv.appendChild(label);
        answersDiv.appendChild(ansDiv);
      });
    });
  }
}

function showSummary() {
  const quizDiv = document.getElementById('quiz');
  quizDiv.innerHTML = `<div class="summary-name">Well done, ${answers.name}!</div>`;
  
  const summaryText = document.createElement('div');
  summaryText.className = 'summary';
  summaryText.innerHTML = `<p>It’s been great getting to know you. Here’s what you shared with us today:</p>`;
  quizDiv.appendChild(summaryText);

  Object.keys(answers).forEach(key => {
    if (key === "name") return;
    const item = document.createElement('div');
    item.className = 'summary-item';
    item.innerHTML = `<strong>${questions.find(q => q.key === key).question}</strong><br>${answers[key]}`;
    fetchARASAAC(answers[key]).then(imgUrl => {
      if (imgUrl) {
        const img = document.createElement('img');
        img.src = imgUrl;
        item.appendChild(document.createElement('br'));
        item.appendChild(img);
      }
    });
    quizDiv.appendChild(item);
  });
}

function nextStep() {
  if (currentQuestion < questions.length) {
    showQuestion();
  } else {
    showSummary();
  }
}

showQuestion();
</script>

</body>
</html>
