<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Meet & Greet Quiz</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f8f8f8;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
  }
  #app {
    background: #fff;
    padding: 30px;
    border-radius: 10px;
    max-width: 800px;
    width: 100%;
    text-align: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  }
  h1 {
    font-size: 2.5rem;
    margin-bottom: 20px;
  }
  p {
    font-size: 1.5rem;
    margin-bottom: 20px;
  }
  input[type="text"] {
    font-size: 1.5rem;
    padding: 10px;
    width: 80%;
    margin-bottom: 20px;
  }
  button {
    font-size: 1.5rem;
    padding: 10px 20px;
    margin: 10px;
    cursor: pointer;
  }
  .options {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
    margin-bottom: 20px;
  }
  .option {
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: pointer;
  }
  .option img {
    max-width: 120px;
    height: auto;
    border: 2px solid transparent;
    border-radius: 8px;
  }
  .option span {
    font-size: 1.2rem;
    margin-top: 5px;
  }
  .option.selected img {
    border-color: #007BFF;
  }
  .summary {
    text-align: center;
  }
  .summary h2 {
    font-size: 3rem;
    margin-bottom: 20px;
    color: #007BFF;
  }
  .summary-item {
    margin-bottom: 20px;
  }
  .summary-item img {
    max-width: 100px;
    display: block;
    margin: 10px auto;
  }
</style>
</head>
<body>
<div id="app"></div>

<script>
const quizData = [
  {
    type: 'text',
    question: "What's your name?",
    key: 'name'
  },
  {
    type: 'choice',
    question: "What's your favourite colour?",
    key: 'colour',
    options: ['red', 'blue', 'green']
  },
  {
    type: 'choice',
    question: "What's your favourite animal?",
    key: 'animal',
    options: ['cat', 'dog', 'rabbit']
  }
];

let currentQuestion = 0;
let answers = {};
const app = document.getElementById('app');

function fetchArasaacImage(word) {
  return `https://static.arasaac.org/pictograms/${encodeURIComponent(word)}/1.png`;
}

function renderQuestion() {
  app.innerHTML = '';
  const q = quizData[currentQuestion];

  const h1 = document.createElement('h1');
  h1.textContent = q.question;
  app.appendChild(h1);

  if (q.type === 'text') {
    const input = document.createElement('input');
    input.type = 'text';
    input.id = 'answerInput';
    app.appendChild(input);

    const nextBtn = document.createElement('button');
    nextBtn.textContent = 'Next';
    nextBtn.onclick = () => {
      const value = document.getElementById('answerInput').value.trim();
      if (value) {
        answers[q.key] = value;
        currentQuestion++;
        renderQuestionOrSummary();
      }
    };
    app.appendChild(nextBtn);
  } else if (q.type === 'choice') {
    const optionsDiv = document.createElement('div');
    optionsDiv.className = 'options';

    q.options.forEach(opt => {
      const optionDiv = document.createElement('div');
      optionDiv.className = 'option';

      const img = document.createElement('img');
      img.src = fetchArasaacImage(opt);
      img.alt = opt;
      const label = document.createElement('span');
      label.textContent = opt;

      optionDiv.appendChild(img);
      optionDiv.appendChild(label);

      optionDiv.onclick = () => {
        answers[q.key] = opt;
        currentQuestion++;
        renderQuestionOrSummary();
      };

      optionsDiv.appendChild(optionDiv);
    });

    app.appendChild(optionsDiv);
  }
}

function renderSummary() {
  app.innerHTML = '';
  const summaryDiv = document.createElement('div');
  summaryDiv.className = 'summary';

  const h2 = document.createElement('h2');
  h2.textContent = `Well done, ${answers.name}!`;
  summaryDiv.appendChild(h2);

  const p = document.createElement('p');
  p.textContent = `Here's what we learned about you today:`;
  summaryDiv.appendChild(p);

  Object.keys(answers).forEach(key => {
    if (key === 'name') return;
    const itemDiv = document.createElement('div');
    itemDiv.className = 'summary-item';

    const qText = quizData.find(q => q.key === key).question;
    const answerText = answers[key];

    const qP = document.createElement('p');
    qP.textContent = `${qText} â€” You said: ${answerText}`;
    itemDiv.appendChild(qP);

    const img = document.createElement('img');
    img.src = fetchArasaacImage(answerText);
    img.alt = answerText;
    itemDiv.appendChild(img);

    summaryDiv.appendChild(itemDiv);
  });

  app.appendChild(summaryDiv);
}

function renderQuestionOrSummary() {
  if (currentQuestion < quizData.length) {
    renderQuestion();
  } else {
    renderSummary();
  }
}

renderQuestionOrSummary();
</script>
</body>
</html>
